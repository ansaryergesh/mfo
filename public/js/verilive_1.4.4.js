(()=>{var e={156:e=>{e.exports=function(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}},82:function(e){e.exports=function(e){var t={};function i(r){if(t[r])return t[r].exports;var a=t[r]={i:r,l:!1,exports:{}};return e[r].call(a.exports,a,a.exports,i),a.l=!0,a.exports}return i.m=e,i.c=t,i.d=function(e,t,r){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},i.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(i.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)i.d(r,a,function(t){return e[t]}.bind(null,a));return r},i.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="",i(i.s=90)}({17:function(e,t,i){"use strict";t.__esModule=!0,t.default=void 0;var r=i(18),a=function(){function e(){}return e.getFirstMatch=function(e,t){var i=t.match(e);return i&&i.length>0&&i[1]||""},e.getSecondMatch=function(e,t){var i=t.match(e);return i&&i.length>1&&i[2]||""},e.matchAndReturnConst=function(e,t,i){if(e.test(t))return i},e.getWindowsVersionName=function(e){switch(e){case"NT":return"NT";case"XP":return"XP";case"NT 5.0":return"2000";case"NT 5.1":return"XP";case"NT 5.2":return"2003";case"NT 6.0":return"Vista";case"NT 6.1":return"7";case"NT 6.2":return"8";case"NT 6.3":return"8.1";case"NT 10.0":return"10";default:return}},e.getMacOSVersionName=function(e){var t=e.split(".").splice(0,2).map((function(e){return parseInt(e,10)||0}));if(t.push(0),10===t[0])switch(t[1]){case 5:return"Leopard";case 6:return"Snow Leopard";case 7:return"Lion";case 8:return"Mountain Lion";case 9:return"Mavericks";case 10:return"Yosemite";case 11:return"El Capitan";case 12:return"Sierra";case 13:return"High Sierra";case 14:return"Mojave";case 15:return"Catalina";default:return}},e.getAndroidVersionName=function(e){var t=e.split(".").splice(0,2).map((function(e){return parseInt(e,10)||0}));if(t.push(0),!(1===t[0]&&t[1]<5))return 1===t[0]&&t[1]<6?"Cupcake":1===t[0]&&t[1]>=6?"Donut":2===t[0]&&t[1]<2?"Eclair":2===t[0]&&2===t[1]?"Froyo":2===t[0]&&t[1]>2?"Gingerbread":3===t[0]?"Honeycomb":4===t[0]&&t[1]<1?"Ice Cream Sandwich":4===t[0]&&t[1]<4?"Jelly Bean":4===t[0]&&t[1]>=4?"KitKat":5===t[0]?"Lollipop":6===t[0]?"Marshmallow":7===t[0]?"Nougat":8===t[0]?"Oreo":9===t[0]?"Pie":void 0},e.getVersionPrecision=function(e){return e.split(".").length},e.compareVersions=function(t,i,r){void 0===r&&(r=!1);var a=e.getVersionPrecision(t),s=e.getVersionPrecision(i),n=Math.max(a,s),o=0,d=e.map([t,i],(function(t){var i=n-e.getVersionPrecision(t),r=t+new Array(i+1).join(".0");return e.map(r.split("."),(function(e){return new Array(20-e.length).join("0")+e})).reverse()}));for(r&&(o=n-Math.min(a,s)),n-=1;n>=o;){if(d[0][n]>d[1][n])return 1;if(d[0][n]===d[1][n]){if(n===o)return 0;n-=1}else if(d[0][n]<d[1][n])return-1}},e.map=function(e,t){var i,r=[];if(Array.prototype.map)return Array.prototype.map.call(e,t);for(i=0;i<e.length;i+=1)r.push(t(e[i]));return r},e.find=function(e,t){var i,r;if(Array.prototype.find)return Array.prototype.find.call(e,t);for(i=0,r=e.length;i<r;i+=1){var a=e[i];if(t(a,i))return a}},e.assign=function(e){for(var t,i,r=e,a=arguments.length,s=new Array(a>1?a-1:0),n=1;n<a;n++)s[n-1]=arguments[n];if(Object.assign)return Object.assign.apply(Object,[e].concat(s));var o=function(){var e=s[t];"object"==typeof e&&null!==e&&Object.keys(e).forEach((function(t){r[t]=e[t]}))};for(t=0,i=s.length;t<i;t+=1)o();return e},e.getBrowserAlias=function(e){return r.BROWSER_ALIASES_MAP[e]},e.getBrowserTypeByAlias=function(e){return r.BROWSER_MAP[e]||""},e}();t.default=a,e.exports=t.default},18:function(e,t,i){"use strict";t.__esModule=!0,t.ENGINE_MAP=t.OS_MAP=t.PLATFORMS_MAP=t.BROWSER_MAP=t.BROWSER_ALIASES_MAP=void 0,t.BROWSER_ALIASES_MAP={"Amazon Silk":"amazon_silk","Android Browser":"android",Bada:"bada",BlackBerry:"blackberry",Chrome:"chrome",Chromium:"chromium",Electron:"electron",Epiphany:"epiphany",Firefox:"firefox",Focus:"focus",Generic:"generic","Google Search":"google_search",Googlebot:"googlebot","Internet Explorer":"ie","K-Meleon":"k_meleon",Maxthon:"maxthon","Microsoft Edge":"edge","MZ Browser":"mz","NAVER Whale Browser":"naver",Opera:"opera","Opera Coast":"opera_coast",PhantomJS:"phantomjs",Puffin:"puffin",QupZilla:"qupzilla",QQ:"qq",QQLite:"qqlite",Safari:"safari",Sailfish:"sailfish","Samsung Internet for Android":"samsung_internet",SeaMonkey:"seamonkey",Sleipnir:"sleipnir",Swing:"swing",Tizen:"tizen","UC Browser":"uc",Vivaldi:"vivaldi","WebOS Browser":"webos",WeChat:"wechat","Yandex Browser":"yandex",Roku:"roku"},t.BROWSER_MAP={amazon_silk:"Amazon Silk",android:"Android Browser",bada:"Bada",blackberry:"BlackBerry",chrome:"Chrome",chromium:"Chromium",electron:"Electron",epiphany:"Epiphany",firefox:"Firefox",focus:"Focus",generic:"Generic",googlebot:"Googlebot",google_search:"Google Search",ie:"Internet Explorer",k_meleon:"K-Meleon",maxthon:"Maxthon",edge:"Microsoft Edge",mz:"MZ Browser",naver:"NAVER Whale Browser",opera:"Opera",opera_coast:"Opera Coast",phantomjs:"PhantomJS",puffin:"Puffin",qupzilla:"QupZilla",qq:"QQ Browser",qqlite:"QQ Browser Lite",safari:"Safari",sailfish:"Sailfish",samsung_internet:"Samsung Internet for Android",seamonkey:"SeaMonkey",sleipnir:"Sleipnir",swing:"Swing",tizen:"Tizen",uc:"UC Browser",vivaldi:"Vivaldi",webos:"WebOS Browser",wechat:"WeChat",yandex:"Yandex Browser"},t.PLATFORMS_MAP={tablet:"tablet",mobile:"mobile",desktop:"desktop",tv:"tv"},t.OS_MAP={WindowsPhone:"Windows Phone",Windows:"Windows",MacOS:"macOS",iOS:"iOS",Android:"Android",WebOS:"WebOS",BlackBerry:"BlackBerry",Bada:"Bada",Tizen:"Tizen",Linux:"Linux",ChromeOS:"Chrome OS",PlayStation4:"PlayStation 4",Roku:"Roku"},t.ENGINE_MAP={EdgeHTML:"EdgeHTML",Blink:"Blink",Trident:"Trident",Presto:"Presto",Gecko:"Gecko",WebKit:"WebKit"}},90:function(e,t,i){"use strict";t.__esModule=!0,t.default=void 0;var r,a=(r=i(91))&&r.__esModule?r:{default:r},s=i(18);function n(e,t){for(var i=0;i<t.length;i++){var r=t[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var o=function(){function e(){}var t,i;return e.getParser=function(e,t){if(void 0===t&&(t=!1),"string"!=typeof e)throw new Error("UserAgent should be a string");return new a.default(e,t)},e.parse=function(e){return new a.default(e).getResult()},t=e,i=[{key:"BROWSER_MAP",get:function(){return s.BROWSER_MAP}},{key:"ENGINE_MAP",get:function(){return s.ENGINE_MAP}},{key:"OS_MAP",get:function(){return s.OS_MAP}},{key:"PLATFORMS_MAP",get:function(){return s.PLATFORMS_MAP}}],null&&n(t.prototype,null),i&&n(t,i),e}();t.default=o,e.exports=t.default},91:function(e,t,i){"use strict";t.__esModule=!0,t.default=void 0;var r=d(i(92)),a=d(i(93)),s=d(i(94)),n=d(i(95)),o=d(i(17));function d(e){return e&&e.__esModule?e:{default:e}}var l=function(){function e(e,t){if(void 0===t&&(t=!1),null==e||""===e)throw new Error("UserAgent parameter can't be empty");this._ua=e,this.parsedResult={},!0!==t&&this.parse()}var t=e.prototype;return t.getUA=function(){return this._ua},t.test=function(e){return e.test(this._ua)},t.parseBrowser=function(){var e=this;this.parsedResult.browser={};var t=o.default.find(r.default,(function(t){if("function"==typeof t.test)return t.test(e);if(t.test instanceof Array)return t.test.some((function(t){return e.test(t)}));throw new Error("Browser's test function is not valid")}));return t&&(this.parsedResult.browser=t.describe(this.getUA())),this.parsedResult.browser},t.getBrowser=function(){return this.parsedResult.browser?this.parsedResult.browser:this.parseBrowser()},t.getBrowserName=function(e){return e?String(this.getBrowser().name).toLowerCase()||"":this.getBrowser().name||""},t.getBrowserVersion=function(){return this.getBrowser().version},t.getOS=function(){return this.parsedResult.os?this.parsedResult.os:this.parseOS()},t.parseOS=function(){var e=this;this.parsedResult.os={};var t=o.default.find(a.default,(function(t){if("function"==typeof t.test)return t.test(e);if(t.test instanceof Array)return t.test.some((function(t){return e.test(t)}));throw new Error("Browser's test function is not valid")}));return t&&(this.parsedResult.os=t.describe(this.getUA())),this.parsedResult.os},t.getOSName=function(e){var t=this.getOS().name;return e?String(t).toLowerCase()||"":t||""},t.getOSVersion=function(){return this.getOS().version},t.getPlatform=function(){return this.parsedResult.platform?this.parsedResult.platform:this.parsePlatform()},t.getPlatformType=function(e){void 0===e&&(e=!1);var t=this.getPlatform().type;return e?String(t).toLowerCase()||"":t||""},t.parsePlatform=function(){var e=this;this.parsedResult.platform={};var t=o.default.find(s.default,(function(t){if("function"==typeof t.test)return t.test(e);if(t.test instanceof Array)return t.test.some((function(t){return e.test(t)}));throw new Error("Browser's test function is not valid")}));return t&&(this.parsedResult.platform=t.describe(this.getUA())),this.parsedResult.platform},t.getEngine=function(){return this.parsedResult.engine?this.parsedResult.engine:this.parseEngine()},t.getEngineName=function(e){return e?String(this.getEngine().name).toLowerCase()||"":this.getEngine().name||""},t.parseEngine=function(){var e=this;this.parsedResult.engine={};var t=o.default.find(n.default,(function(t){if("function"==typeof t.test)return t.test(e);if(t.test instanceof Array)return t.test.some((function(t){return e.test(t)}));throw new Error("Browser's test function is not valid")}));return t&&(this.parsedResult.engine=t.describe(this.getUA())),this.parsedResult.engine},t.parse=function(){return this.parseBrowser(),this.parseOS(),this.parsePlatform(),this.parseEngine(),this},t.getResult=function(){return o.default.assign({},this.parsedResult)},t.satisfies=function(e){var t=this,i={},r=0,a={},s=0;if(Object.keys(e).forEach((function(t){var n=e[t];"string"==typeof n?(a[t]=n,s+=1):"object"==typeof n&&(i[t]=n,r+=1)})),r>0){var n=Object.keys(i),d=o.default.find(n,(function(e){return t.isOS(e)}));if(d){var l=this.satisfies(i[d]);if(void 0!==l)return l}var h=o.default.find(n,(function(e){return t.isPlatform(e)}));if(h){var c=this.satisfies(i[h]);if(void 0!==c)return c}}if(s>0){var u=Object.keys(a),v=o.default.find(u,(function(e){return t.isBrowser(e,!0)}));if(void 0!==v)return this.compareVersion(a[v])}},t.isBrowser=function(e,t){void 0===t&&(t=!1);var i=this.getBrowserName().toLowerCase(),r=e.toLowerCase(),a=o.default.getBrowserTypeByAlias(r);return t&&a&&(r=a.toLowerCase()),r===i},t.compareVersion=function(e){var t=[0],i=e,r=!1,a=this.getBrowserVersion();if("string"==typeof a)return">"===e[0]||"<"===e[0]?(i=e.substr(1),"="===e[1]?(r=!0,i=e.substr(2)):t=[],">"===e[0]?t.push(1):t.push(-1)):"="===e[0]?i=e.substr(1):"~"===e[0]&&(r=!0,i=e.substr(1)),t.indexOf(o.default.compareVersions(a,i,r))>-1},t.isOS=function(e){return this.getOSName(!0)===String(e).toLowerCase()},t.isPlatform=function(e){return this.getPlatformType(!0)===String(e).toLowerCase()},t.isEngine=function(e){return this.getEngineName(!0)===String(e).toLowerCase()},t.is=function(e,t){return void 0===t&&(t=!1),this.isBrowser(e,t)||this.isOS(e)||this.isPlatform(e)},t.some=function(e){var t=this;return void 0===e&&(e=[]),e.some((function(e){return t.is(e)}))},e}();t.default=l,e.exports=t.default},92:function(e,t,i){"use strict";t.__esModule=!0,t.default=void 0;var r,a=(r=i(17))&&r.__esModule?r:{default:r},s=/version\/(\d+(\.?_?\d+)+)/i,n=[{test:[/googlebot/i],describe:function(e){var t={name:"Googlebot"},i=a.default.getFirstMatch(/googlebot\/(\d+(\.\d+))/i,e)||a.default.getFirstMatch(s,e);return i&&(t.version=i),t}},{test:[/opera/i],describe:function(e){var t={name:"Opera"},i=a.default.getFirstMatch(s,e)||a.default.getFirstMatch(/(?:opera)[\s/](\d+(\.?_?\d+)+)/i,e);return i&&(t.version=i),t}},{test:[/opr\/|opios/i],describe:function(e){var t={name:"Opera"},i=a.default.getFirstMatch(/(?:opr|opios)[\s/](\S+)/i,e)||a.default.getFirstMatch(s,e);return i&&(t.version=i),t}},{test:[/SamsungBrowser/i],describe:function(e){var t={name:"Samsung Internet for Android"},i=a.default.getFirstMatch(s,e)||a.default.getFirstMatch(/(?:SamsungBrowser)[\s/](\d+(\.?_?\d+)+)/i,e);return i&&(t.version=i),t}},{test:[/Whale/i],describe:function(e){var t={name:"NAVER Whale Browser"},i=a.default.getFirstMatch(s,e)||a.default.getFirstMatch(/(?:whale)[\s/](\d+(?:\.\d+)+)/i,e);return i&&(t.version=i),t}},{test:[/MZBrowser/i],describe:function(e){var t={name:"MZ Browser"},i=a.default.getFirstMatch(/(?:MZBrowser)[\s/](\d+(?:\.\d+)+)/i,e)||a.default.getFirstMatch(s,e);return i&&(t.version=i),t}},{test:[/focus/i],describe:function(e){var t={name:"Focus"},i=a.default.getFirstMatch(/(?:focus)[\s/](\d+(?:\.\d+)+)/i,e)||a.default.getFirstMatch(s,e);return i&&(t.version=i),t}},{test:[/swing/i],describe:function(e){var t={name:"Swing"},i=a.default.getFirstMatch(/(?:swing)[\s/](\d+(?:\.\d+)+)/i,e)||a.default.getFirstMatch(s,e);return i&&(t.version=i),t}},{test:[/coast/i],describe:function(e){var t={name:"Opera Coast"},i=a.default.getFirstMatch(s,e)||a.default.getFirstMatch(/(?:coast)[\s/](\d+(\.?_?\d+)+)/i,e);return i&&(t.version=i),t}},{test:[/opt\/\d+(?:.?_?\d+)+/i],describe:function(e){var t={name:"Opera Touch"},i=a.default.getFirstMatch(/(?:opt)[\s/](\d+(\.?_?\d+)+)/i,e)||a.default.getFirstMatch(s,e);return i&&(t.version=i),t}},{test:[/yabrowser/i],describe:function(e){var t={name:"Yandex Browser"},i=a.default.getFirstMatch(/(?:yabrowser)[\s/](\d+(\.?_?\d+)+)/i,e)||a.default.getFirstMatch(s,e);return i&&(t.version=i),t}},{test:[/ucbrowser/i],describe:function(e){var t={name:"UC Browser"},i=a.default.getFirstMatch(s,e)||a.default.getFirstMatch(/(?:ucbrowser)[\s/](\d+(\.?_?\d+)+)/i,e);return i&&(t.version=i),t}},{test:[/Maxthon|mxios/i],describe:function(e){var t={name:"Maxthon"},i=a.default.getFirstMatch(s,e)||a.default.getFirstMatch(/(?:Maxthon|mxios)[\s/](\d+(\.?_?\d+)+)/i,e);return i&&(t.version=i),t}},{test:[/epiphany/i],describe:function(e){var t={name:"Epiphany"},i=a.default.getFirstMatch(s,e)||a.default.getFirstMatch(/(?:epiphany)[\s/](\d+(\.?_?\d+)+)/i,e);return i&&(t.version=i),t}},{test:[/puffin/i],describe:function(e){var t={name:"Puffin"},i=a.default.getFirstMatch(s,e)||a.default.getFirstMatch(/(?:puffin)[\s/](\d+(\.?_?\d+)+)/i,e);return i&&(t.version=i),t}},{test:[/sleipnir/i],describe:function(e){var t={name:"Sleipnir"},i=a.default.getFirstMatch(s,e)||a.default.getFirstMatch(/(?:sleipnir)[\s/](\d+(\.?_?\d+)+)/i,e);return i&&(t.version=i),t}},{test:[/k-meleon/i],describe:function(e){var t={name:"K-Meleon"},i=a.default.getFirstMatch(s,e)||a.default.getFirstMatch(/(?:k-meleon)[\s/](\d+(\.?_?\d+)+)/i,e);return i&&(t.version=i),t}},{test:[/micromessenger/i],describe:function(e){var t={name:"WeChat"},i=a.default.getFirstMatch(/(?:micromessenger)[\s/](\d+(\.?_?\d+)+)/i,e)||a.default.getFirstMatch(s,e);return i&&(t.version=i),t}},{test:[/qqbrowser/i],describe:function(e){var t={name:/qqbrowserlite/i.test(e)?"QQ Browser Lite":"QQ Browser"},i=a.default.getFirstMatch(/(?:qqbrowserlite|qqbrowser)[/](\d+(\.?_?\d+)+)/i,e)||a.default.getFirstMatch(s,e);return i&&(t.version=i),t}},{test:[/msie|trident/i],describe:function(e){var t={name:"Internet Explorer"},i=a.default.getFirstMatch(/(?:msie |rv:)(\d+(\.?_?\d+)+)/i,e);return i&&(t.version=i),t}},{test:[/\sedg\//i],describe:function(e){var t={name:"Microsoft Edge"},i=a.default.getFirstMatch(/\sedg\/(\d+(\.?_?\d+)+)/i,e);return i&&(t.version=i),t}},{test:[/edg([ea]|ios)/i],describe:function(e){var t={name:"Microsoft Edge"},i=a.default.getSecondMatch(/edg([ea]|ios)\/(\d+(\.?_?\d+)+)/i,e);return i&&(t.version=i),t}},{test:[/vivaldi/i],describe:function(e){var t={name:"Vivaldi"},i=a.default.getFirstMatch(/vivaldi\/(\d+(\.?_?\d+)+)/i,e);return i&&(t.version=i),t}},{test:[/seamonkey/i],describe:function(e){var t={name:"SeaMonkey"},i=a.default.getFirstMatch(/seamonkey\/(\d+(\.?_?\d+)+)/i,e);return i&&(t.version=i),t}},{test:[/sailfish/i],describe:function(e){var t={name:"Sailfish"},i=a.default.getFirstMatch(/sailfish\s?browser\/(\d+(\.\d+)?)/i,e);return i&&(t.version=i),t}},{test:[/silk/i],describe:function(e){var t={name:"Amazon Silk"},i=a.default.getFirstMatch(/silk\/(\d+(\.?_?\d+)+)/i,e);return i&&(t.version=i),t}},{test:[/phantom/i],describe:function(e){var t={name:"PhantomJS"},i=a.default.getFirstMatch(/phantomjs\/(\d+(\.?_?\d+)+)/i,e);return i&&(t.version=i),t}},{test:[/slimerjs/i],describe:function(e){var t={name:"SlimerJS"},i=a.default.getFirstMatch(/slimerjs\/(\d+(\.?_?\d+)+)/i,e);return i&&(t.version=i),t}},{test:[/blackberry|\bbb\d+/i,/rim\stablet/i],describe:function(e){var t={name:"BlackBerry"},i=a.default.getFirstMatch(s,e)||a.default.getFirstMatch(/blackberry[\d]+\/(\d+(\.?_?\d+)+)/i,e);return i&&(t.version=i),t}},{test:[/(web|hpw)[o0]s/i],describe:function(e){var t={name:"WebOS Browser"},i=a.default.getFirstMatch(s,e)||a.default.getFirstMatch(/w(?:eb)?[o0]sbrowser\/(\d+(\.?_?\d+)+)/i,e);return i&&(t.version=i),t}},{test:[/bada/i],describe:function(e){var t={name:"Bada"},i=a.default.getFirstMatch(/dolfin\/(\d+(\.?_?\d+)+)/i,e);return i&&(t.version=i),t}},{test:[/tizen/i],describe:function(e){var t={name:"Tizen"},i=a.default.getFirstMatch(/(?:tizen\s?)?browser\/(\d+(\.?_?\d+)+)/i,e)||a.default.getFirstMatch(s,e);return i&&(t.version=i),t}},{test:[/qupzilla/i],describe:function(e){var t={name:"QupZilla"},i=a.default.getFirstMatch(/(?:qupzilla)[\s/](\d+(\.?_?\d+)+)/i,e)||a.default.getFirstMatch(s,e);return i&&(t.version=i),t}},{test:[/firefox|iceweasel|fxios/i],describe:function(e){var t={name:"Firefox"},i=a.default.getFirstMatch(/(?:firefox|iceweasel|fxios)[\s/](\d+(\.?_?\d+)+)/i,e);return i&&(t.version=i),t}},{test:[/electron/i],describe:function(e){var t={name:"Electron"},i=a.default.getFirstMatch(/(?:electron)\/(\d+(\.?_?\d+)+)/i,e);return i&&(t.version=i),t}},{test:[/MiuiBrowser/i],describe:function(e){var t={name:"Miui"},i=a.default.getFirstMatch(/(?:MiuiBrowser)[\s/](\d+(\.?_?\d+)+)/i,e);return i&&(t.version=i),t}},{test:[/chromium/i],describe:function(e){var t={name:"Chromium"},i=a.default.getFirstMatch(/(?:chromium)[\s/](\d+(\.?_?\d+)+)/i,e)||a.default.getFirstMatch(s,e);return i&&(t.version=i),t}},{test:[/chrome|crios|crmo/i],describe:function(e){var t={name:"Chrome"},i=a.default.getFirstMatch(/(?:chrome|crios|crmo)\/(\d+(\.?_?\d+)+)/i,e);return i&&(t.version=i),t}},{test:[/GSA/i],describe:function(e){var t={name:"Google Search"},i=a.default.getFirstMatch(/(?:GSA)\/(\d+(\.?_?\d+)+)/i,e);return i&&(t.version=i),t}},{test:function(e){var t=!e.test(/like android/i),i=e.test(/android/i);return t&&i},describe:function(e){var t={name:"Android Browser"},i=a.default.getFirstMatch(s,e);return i&&(t.version=i),t}},{test:[/playstation 4/i],describe:function(e){var t={name:"PlayStation 4"},i=a.default.getFirstMatch(s,e);return i&&(t.version=i),t}},{test:[/safari|applewebkit/i],describe:function(e){var t={name:"Safari"},i=a.default.getFirstMatch(s,e);return i&&(t.version=i),t}},{test:[/.*/i],describe:function(e){var t=-1!==e.search("\\(")?/^(.*)\/(.*)[ \t]\((.*)/:/^(.*)\/(.*) /;return{name:a.default.getFirstMatch(t,e),version:a.default.getSecondMatch(t,e)}}}];t.default=n,e.exports=t.default},93:function(e,t,i){"use strict";t.__esModule=!0,t.default=void 0;var r,a=(r=i(17))&&r.__esModule?r:{default:r},s=i(18),n=[{test:[/Roku\/DVP/],describe:function(e){var t=a.default.getFirstMatch(/Roku\/DVP-(\d+\.\d+)/i,e);return{name:s.OS_MAP.Roku,version:t}}},{test:[/windows phone/i],describe:function(e){var t=a.default.getFirstMatch(/windows phone (?:os)?\s?(\d+(\.\d+)*)/i,e);return{name:s.OS_MAP.WindowsPhone,version:t}}},{test:[/windows /i],describe:function(e){var t=a.default.getFirstMatch(/Windows ((NT|XP)( \d\d?.\d)?)/i,e),i=a.default.getWindowsVersionName(t);return{name:s.OS_MAP.Windows,version:t,versionName:i}}},{test:[/Macintosh(.*?) FxiOS(.*?)\//],describe:function(e){var t={name:s.OS_MAP.iOS},i=a.default.getSecondMatch(/(Version\/)(\d[\d.]+)/,e);return i&&(t.version=i),t}},{test:[/macintosh/i],describe:function(e){var t=a.default.getFirstMatch(/mac os x (\d+(\.?_?\d+)+)/i,e).replace(/[_\s]/g,"."),i=a.default.getMacOSVersionName(t),r={name:s.OS_MAP.MacOS,version:t};return i&&(r.versionName=i),r}},{test:[/(ipod|iphone|ipad)/i],describe:function(e){var t=a.default.getFirstMatch(/os (\d+([_\s]\d+)*) like mac os x/i,e).replace(/[_\s]/g,".");return{name:s.OS_MAP.iOS,version:t}}},{test:function(e){var t=!e.test(/like android/i),i=e.test(/android/i);return t&&i},describe:function(e){var t=a.default.getFirstMatch(/android[\s/-](\d+(\.\d+)*)/i,e),i=a.default.getAndroidVersionName(t),r={name:s.OS_MAP.Android,version:t};return i&&(r.versionName=i),r}},{test:[/(web|hpw)[o0]s/i],describe:function(e){var t=a.default.getFirstMatch(/(?:web|hpw)[o0]s\/(\d+(\.\d+)*)/i,e),i={name:s.OS_MAP.WebOS};return t&&t.length&&(i.version=t),i}},{test:[/blackberry|\bbb\d+/i,/rim\stablet/i],describe:function(e){var t=a.default.getFirstMatch(/rim\stablet\sos\s(\d+(\.\d+)*)/i,e)||a.default.getFirstMatch(/blackberry\d+\/(\d+([_\s]\d+)*)/i,e)||a.default.getFirstMatch(/\bbb(\d+)/i,e);return{name:s.OS_MAP.BlackBerry,version:t}}},{test:[/bada/i],describe:function(e){var t=a.default.getFirstMatch(/bada\/(\d+(\.\d+)*)/i,e);return{name:s.OS_MAP.Bada,version:t}}},{test:[/tizen/i],describe:function(e){var t=a.default.getFirstMatch(/tizen[/\s](\d+(\.\d+)*)/i,e);return{name:s.OS_MAP.Tizen,version:t}}},{test:[/linux/i],describe:function(){return{name:s.OS_MAP.Linux}}},{test:[/CrOS/],describe:function(){return{name:s.OS_MAP.ChromeOS}}},{test:[/PlayStation 4/],describe:function(e){var t=a.default.getFirstMatch(/PlayStation 4[/\s](\d+(\.\d+)*)/i,e);return{name:s.OS_MAP.PlayStation4,version:t}}}];t.default=n,e.exports=t.default},94:function(e,t,i){"use strict";t.__esModule=!0,t.default=void 0;var r,a=(r=i(17))&&r.__esModule?r:{default:r},s=i(18),n=[{test:[/googlebot/i],describe:function(){return{type:"bot",vendor:"Google"}}},{test:[/huawei/i],describe:function(e){var t=a.default.getFirstMatch(/(can-l01)/i,e)&&"Nova",i={type:s.PLATFORMS_MAP.mobile,vendor:"Huawei"};return t&&(i.model=t),i}},{test:[/nexus\s*(?:7|8|9|10).*/i],describe:function(){return{type:s.PLATFORMS_MAP.tablet,vendor:"Nexus"}}},{test:[/ipad/i],describe:function(){return{type:s.PLATFORMS_MAP.tablet,vendor:"Apple",model:"iPad"}}},{test:[/Macintosh(.*?) FxiOS(.*?)\//],describe:function(){return{type:s.PLATFORMS_MAP.tablet,vendor:"Apple",model:"iPad"}}},{test:[/kftt build/i],describe:function(){return{type:s.PLATFORMS_MAP.tablet,vendor:"Amazon",model:"Kindle Fire HD 7"}}},{test:[/silk/i],describe:function(){return{type:s.PLATFORMS_MAP.tablet,vendor:"Amazon"}}},{test:[/tablet(?! pc)/i],describe:function(){return{type:s.PLATFORMS_MAP.tablet}}},{test:function(e){var t=e.test(/ipod|iphone/i),i=e.test(/like (ipod|iphone)/i);return t&&!i},describe:function(e){var t=a.default.getFirstMatch(/(ipod|iphone)/i,e);return{type:s.PLATFORMS_MAP.mobile,vendor:"Apple",model:t}}},{test:[/nexus\s*[0-6].*/i,/galaxy nexus/i],describe:function(){return{type:s.PLATFORMS_MAP.mobile,vendor:"Nexus"}}},{test:[/[^-]mobi/i],describe:function(){return{type:s.PLATFORMS_MAP.mobile}}},{test:function(e){return"blackberry"===e.getBrowserName(!0)},describe:function(){return{type:s.PLATFORMS_MAP.mobile,vendor:"BlackBerry"}}},{test:function(e){return"bada"===e.getBrowserName(!0)},describe:function(){return{type:s.PLATFORMS_MAP.mobile}}},{test:function(e){return"windows phone"===e.getBrowserName()},describe:function(){return{type:s.PLATFORMS_MAP.mobile,vendor:"Microsoft"}}},{test:function(e){var t=Number(String(e.getOSVersion()).split(".")[0]);return"android"===e.getOSName(!0)&&t>=3},describe:function(){return{type:s.PLATFORMS_MAP.tablet}}},{test:function(e){return"android"===e.getOSName(!0)},describe:function(){return{type:s.PLATFORMS_MAP.mobile}}},{test:function(e){return"macos"===e.getOSName(!0)},describe:function(){return{type:s.PLATFORMS_MAP.desktop,vendor:"Apple"}}},{test:function(e){return"windows"===e.getOSName(!0)},describe:function(){return{type:s.PLATFORMS_MAP.desktop}}},{test:function(e){return"linux"===e.getOSName(!0)},describe:function(){return{type:s.PLATFORMS_MAP.desktop}}},{test:function(e){return"playstation 4"===e.getOSName(!0)},describe:function(){return{type:s.PLATFORMS_MAP.tv}}},{test:function(e){return"roku"===e.getOSName(!0)},describe:function(){return{type:s.PLATFORMS_MAP.tv}}}];t.default=n,e.exports=t.default},95:function(e,t,i){"use strict";t.__esModule=!0,t.default=void 0;var r,a=(r=i(17))&&r.__esModule?r:{default:r},s=i(18),n=[{test:function(e){return"microsoft edge"===e.getBrowserName(!0)},describe:function(e){if(/\sedg\//i.test(e))return{name:s.ENGINE_MAP.Blink};var t=a.default.getFirstMatch(/edge\/(\d+(\.?_?\d+)+)/i,e);return{name:s.ENGINE_MAP.EdgeHTML,version:t}}},{test:[/trident/i],describe:function(e){var t={name:s.ENGINE_MAP.Trident},i=a.default.getFirstMatch(/trident\/(\d+(\.?_?\d+)+)/i,e);return i&&(t.version=i),t}},{test:function(e){return e.test(/presto/i)},describe:function(e){var t={name:s.ENGINE_MAP.Presto},i=a.default.getFirstMatch(/presto\/(\d+(\.?_?\d+)+)/i,e);return i&&(t.version=i),t}},{test:function(e){var t=e.test(/gecko/i),i=e.test(/like gecko/i);return t&&!i},describe:function(e){var t={name:s.ENGINE_MAP.Gecko},i=a.default.getFirstMatch(/gecko\/(\d+(\.?_?\d+)+)/i,e);return i&&(t.version=i),t}},{test:[/(apple)?webkit\/537\.36/i],describe:function(){return{name:s.ENGINE_MAP.Blink}}},{test:[/(apple)?webkit/i],describe:function(e){var t={name:s.ENGINE_MAP.WebKit},i=a.default.getFirstMatch(/webkit\/(\d+(\.?_?\d+)+)/i,e);return i&&(t.version=i),t}}];t.default=n,e.exports=t.default}})},972:(e,t,i)=>{var r=i(679),a=i(161),s=a;s.v1=r,s.v4=a,e.exports=s},318:e=>{for(var t=[],i=0;i<256;++i)t[i]=(i+256).toString(16).substr(1);e.exports=function(e,i){var r=i||0,a=t;return[a[e[r++]],a[e[r++]],a[e[r++]],a[e[r++]],"-",a[e[r++]],a[e[r++]],"-",a[e[r++]],a[e[r++]],"-",a[e[r++]],a[e[r++]],"-",a[e[r++]],a[e[r++]],a[e[r++]],a[e[r++]],a[e[r++]],a[e[r++]]].join("")}},42:e=>{var t="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!=typeof msCrypto&&"function"==typeof window.msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto);if(t){var i=new Uint8Array(16);e.exports=function(){return t(i),i}}else{var r=new Array(16);e.exports=function(){for(var e,t=0;t<16;t++)0==(3&t)&&(e=4294967296*Math.random()),r[t]=e>>>((3&t)<<3)&255;return r}}},679:(e,t,i)=>{var r,a,s=i(42),n=i(318),o=0,d=0;e.exports=function(e,t,i){var l=t&&i||0,h=t||[],c=(e=e||{}).node||r,u=void 0!==e.clockseq?e.clockseq:a;if(null==c||null==u){var v=s();null==c&&(c=r=[1|v[0],v[1],v[2],v[3],v[4],v[5]]),null==u&&(u=a=16383&(v[6]<<8|v[7]))}var f=void 0!==e.msecs?e.msecs:(new Date).getTime(),p=void 0!==e.nsecs?e.nsecs:d+1,g=f-o+(p-d)/1e4;if(g<0&&void 0===e.clockseq&&(u=u+1&16383),(g<0||f>o)&&void 0===e.nsecs&&(p=0),p>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");o=f,d=p,a=u;var m=(1e4*(268435455&(f+=122192928e5))+p)%4294967296;h[l++]=m>>>24&255,h[l++]=m>>>16&255,h[l++]=m>>>8&255,h[l++]=255&m;var C=f/4294967296*1e4&268435455;h[l++]=C>>>8&255,h[l++]=255&C,h[l++]=C>>>24&15|16,h[l++]=C>>>16&255,h[l++]=u>>>8|128,h[l++]=255&u;for(var b=0;b<6;++b)h[l+b]=c[b];return t||n(h)}},161:(e,t,i)=>{var r=i(42),a=i(318);e.exports=function(e,t,i){var s=t&&i||0;"string"==typeof e&&(t="binary"===e?new Array(16):null,e=null);var n=(e=e||{}).random||(e.rng||r)();if(n[6]=15&n[6]|64,n[8]=63&n[8]|128,t)for(var o=0;o<16;++o)t[s+o]=n[o];return t||a(n)}}},t={};function i(r){if(t[r])return t[r].exports;var a=t[r]={exports:{}};return e[r].call(a.exports,a,a.exports,i),a.exports}i.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return i.d(t,{a:t}),t},i.d=(e,t)=>{for(var r in t)i.o(t,r)&&!i.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},i.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{"use strict";var e=i(156),t=i.n(e),r=i(82),a=i.n(r);function s(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,r)}return i}function n(e){for(var i=1;i<arguments.length;i++){var r=null!=arguments[i]?arguments[i]:{};i%2?s(Object(r),!0).forEach((function(i){t()(e,i,r[i])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):s(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}class o extends Error{constructor(){super("No video input devices found"),this.name="NoVideoInputDevicesError"}}class d{static linear(e,t,i,r,a){return i+r*e}static easeInQuad(e,t,i,r,a){return r*(t/=a)*t+i}static easeOutQuad(e,t,i,r,a){return-r*(t/=a)*(t-2)+i}static easeInOutQuad(e,t,i,r,a){return(t/=a/2)<1?r/2*t*t+i:-r/2*(--t*(t-2)-1)+i}static easeInCubic(e,t,i,r,a){return r*(t/=a)*t*t+i}static easeOutCubic(e,t,i,r,a){return r*((t=t/a-1)*t*t+1)+i}static easeInOutCubic(e,t,i,r,a){return(t/=a/2)<1?r/2*t*t*t+i:r/2*((t-=2)*t*t+2)+i}static easeInQuart(e,t,i,r,a){return r*(t/=a)*t*t*t+i}static easeOutQuart(e,t,i,r,a){return-r*((t=t/a-1)*t*t*t-1)+i}static easeInOutQuart(e,t,i,r,a){return(t/=a/2)<1?r/2*t*t*t*t+i:-r/2*((t-=2)*t*t*t-2)+i}static easeInQuint(e,t,i,r,a){return r*(t/=a)*t*t*t*t+i}static easeOutQuint(e,t,i,r,a){return r*((t=t/a-1)*t*t*t*t+1)+i}static easeInOutQuint(e,t,i,r,a){return(t/=a/2)<1?r/2*t*t*t*t*t+i:r/2*((t-=2)*t*t*t*t+2)+i}static easeInSine(e,t,i,r,a){return-r*Math.cos(t/a*(Math.PI/2))+r+i}static easeOutSine(e,t,i,r,a){return r*Math.sin(t/a*(Math.PI/2))+i}static easeInOutSine(e,t,i,r,a){return-r/2*(Math.cos(Math.PI*t/a)-1)+i}static easeInExpo(e,t,i,r,a){return 0===t?i:r*Math.pow(2,10*(t/a-1))+i}static easeOutExpo(e,t,i,r,a){return t===a?i+r:r*(1-Math.pow(2,-10*t/a))+i}static easeInOutExpo(e,t,i,r,a){return 0===t?i:t===a?i+r:(t/=a/2)<1?r/2*Math.pow(2,10*(t-1))+i:r/2*(2-Math.pow(2,-10*--t))+i}static easeInCirc(e,t,i,r,a){return-r*(Math.sqrt(1-(t/=a)*t)-1)+i}static easeOutCirc(e,t,i,r,a){return r*Math.sqrt(1-(t=t/a-1)*t)+i}static easeInOutCirc(e,t,i,r,a){return(t/=a/2)<1?-r/2*(Math.sqrt(1-t*t)-1)+i:r/2*(Math.sqrt(1-(t-=2)*t)+1)+i}static easeInElastic(e,t,i,r,a){let s=0,n=r;return 0===t?i:1==(t/=a)?i+r:(s||(s=.3*a),n<Math.abs(r)?n=r:(Math.PI,Math.asin(r/n)),-n*Math.pow(2,10*(t-=1))*Math.sin((t*a-1.70158)*(2*Math.PI)/s)+i)}static easeOutElastic(e,t,i,r,a){let s=0,n=r;return 0===t?i:1==(t/=a)?i+r:(s||(s=.3*a),n<Math.abs(r)?n=r:(Math.PI,Math.asin(r/n)),n*Math.pow(2,-10*t)*Math.sin((t*a-1.70158)*(2*Math.PI)/s)+r+i)}static easeInOutElastic(e,t,i,r,a){let s=1.70158,n=0,o=r;return 0===t?i:2==(t/=a/2)?i+r:(n||(n=a*(.3*1.5)),o<Math.abs(r)?(o=r,s=n/4):s=n/(2*Math.PI)*Math.asin(r/o),t<1?o*Math.pow(2,10*(t-=1))*Math.sin((t*a-s)*(2*Math.PI)/n)*-.5+i:o*Math.pow(2,-10*(t-=1))*Math.sin((t*a-s)*(2*Math.PI)/n)*.5+r+i)}static easeInBack(e,t,i,r,a,s){return void 0===s&&(s=1.70158),r*(t/=a)*t*((s+1)*t-s)+i}static easeOutBack(e,t,i,r,a,s){return void 0===s&&(s=1.70158),r*((t=t/a-1)*t*((s+1)*t+s)+1)+i}static easeInOutBack(e,t,i,r,a,s){return void 0===s&&(s=1.70158),(t/=a/2)<1?r/2*(t*t*((1+(s*=1.525))*t-s))+i:r/2*((t-=2)*t*((1+(s*=1.525))*t+s)+2)+i}static easeInBounce(e,t,i,r,a){return r-$.easing.easeOutBounce(e,a-t,0,r,a)+i}static easeOutBounce(e,t,i,r,a){return(t/=a)<1/2.75?r*(7.5625*t*t)+i:t<2/2.75?r*(7.5625*(t-=1.5/2.75)*t+.75)+i:t<2.5/2.75?r*(7.5625*(t-=2.25/2.75)*t+.9375)+i:r*(7.5625*(t-=2.625/2.75)*t+.984375)+i}static easeInOutBounce(e,t,i,r,a){return t<a/2?.5*$.easing.easeInBounce(e,2*t,0,r,a)+i:.5*$.easing.easeOutBounce(e,2*t-a,0,r,a)+.5*r+i}}class l{constructor(e,t,i){this.video=e,this.overlayCanvas=t,this.ctx=t.getContext("2d"),this.animationLoading=i,this.frameRate=60,this.frame=0,this.animationDuration=.75,this.hintDelayDuration=.5,this.previousData={},this.x=0,this.y=0,this.setLoadingVisibility(!1),this.pathCenter=new Path2D("M 148.523203 0 L 148.523203 0.0348939 C 142.600605 0.412911 137.14207 0.715325 131.880762 1.209655 C 130.563984 1.331783 129.258809 1.465543 127.965234 1.61675 C 124.07291 2.076186 120.255996 2.675198 116.392676 3.530099 C 113.817129 4.100032 111.22418 4.786279 108.579023 5.617916 C 107.256445 6.030827 105.916465 6.484448 104.564883 6.978778 C 103.004473 7.548712 101.420859 8.176802 99.808242 8.863048 C 97.221094 9.95639 94.552734 11.206754 91.779961 12.643219 C 91.03166 13.032868 90.277559 13.434148 89.511855 13.847059 C 88.746152 14.265785 87.974648 14.690328 87.197344 15.138133 C 85.631133 16.022111 84.035918 16.970062 82.400098 17.976169 C 80.70627 19.01717 79.006641 20.122143 77.307012 21.285273 C 76.454297 21.866838 75.601582 22.465849 74.748867 23.082308 C 73.901953 23.698767 73.049238 24.326857 72.196523 24.972394 C 70.496895 26.269283 68.797266 27.62433 67.109238 29.054979 C 66.268125 29.764488 65.427012 30.491444 64.585898 31.241663 C 63.744785 31.986066 62.909473 32.753731 62.079961 33.533028 C 57.920801 37.435328 53.860254 41.762171 49.985332 46.542634 C 49.208027 47.4964 48.442324 48.467613 47.682422 49.462089 C 46.92252 50.456565 46.174219 51.468488 45.431719 52.497857 C 44.689219 53.527227 43.95832 54.574044 43.233223 55.638307 C 41.069531 58.84273 38.987051 62.20999 37.014785 65.75172 C 36.359297 66.938112 35.709609 68.136136 35.077324 69.357422 C 33.180469 73.015465 31.399629 76.853793 29.752207 80.872406 C 29.201133 82.210005 28.667461 83.570866 28.151191 84.949175 C 27.629121 86.333299 27.130254 87.729055 26.642988 89.153889 C 25.668457 91.997741 24.763535 94.923012 23.928223 97.929702 C 23.09291 100.936392 22.333008 104.030317 21.648516 107.211477 C 20.615977 111.980308 19.769062 116.941056 19.113574 122.099536 C 18.875742 123.931466 18.666914 125.786658 18.481289 127.665112 C 17.187715 140.814293 17.054297 155.080078 17.738789 169.700618 C 12.912539 172.061771 8.09209 174.417109 4.67543 185.10627 C 1.26457 195.789616 -0.736699 214.806786 2.291309 231.142943 C 5.313516 247.473283 13.365 261.128425 19.415215 268.281673 C 25.47123 275.440736 29.520176 276.092088 33.574922 276.749257 L 33.569121 276.714363 C 33.569121 276.725994 33.569121 276.73181 33.574922 276.737625 C 34.358027 280.087439 35.135332 283.297677 35.906836 286.356708 C 36.672539 289.415739 37.432441 292.317747 38.169141 295.051102 C 39.526523 300.081638 40.814297 304.524793 42.049863 308.473618 C 43.29123 312.422443 44.486191 315.876939 45.652148 318.930154 C 48.569941 326.548653 51.325312 331.63153 54.237305 335.574539 C 54.823184 336.365468 55.409062 337.109871 56.006543 337.81938 C 57.201504 339.232582 58.43707 340.512025 59.724844 341.744942 C 60.36873 342.361401 61.03002 342.966228 61.70291 343.56524 L 61.708711 343.56524 C 63.733184 345.373907 65.914277 347.176758 68.315801 349.264576 C 73.118848 353.451842 78.815215 358.808054 84.87123 364.379446 C 90.933047 369.945021 97.360312 375.725775 103.630957 380.756311 L 103.636758 380.756311 C 104.680898 381.593765 105.719238 382.413771 106.751777 383.204699 C 107.790117 383.995627 108.816855 384.763293 109.837793 385.50188 C 110.85293 386.240468 111.862266 386.944161 112.86 387.618776 C 113.857734 388.293391 114.843867 388.933113 115.818398 389.532125 C 116.630508 390.03227 117.425215 390.503338 118.214121 390.945327 C 119.003027 391.393132 119.786133 391.806043 120.551836 392.201507 C 122.854746 393.370452 125.070645 394.312587 127.216934 395.062806 C 127.93043 395.312879 128.638125 395.539689 129.34002 395.749053 C 130.738008 396.167779 132.106992 396.510903 133.452773 396.790054 C 134.125664 396.929629 134.792754 397.051758 135.454043 397.162255 C 136.115332 397.272752 136.77082 397.365803 137.426309 397.447222 C 141.336035 397.935736 145.089141 397.97063 148.813242 397.889211 C 150.054609 397.918289 151.301777 397.929921 152.554746 397.918289 C 158.187305 397.865949 163.976484 397.313462 170.409551 395.062806 C 171.123047 394.812733 171.848145 394.539398 172.579043 394.248615 L 172.579043 394.2428 C 173.309941 393.952017 174.046641 393.637972 174.800742 393.294849 C 177.045645 392.271295 179.377559 391.032562 181.808086 389.532125 C 184.725879 387.729274 187.771289 385.583299 190.874707 383.204699 C 191.907246 382.413771 192.945586 381.593765 193.995527 380.756311 C 206.536816 370.69524 219.70459 357.633293 229.310684 349.264576 C 230.911699 347.86882 232.414102 346.606824 233.841094 345.385538 L 233.841094 345.379722 C 234.55459 344.769079 235.244883 344.170068 235.923574 343.56524 C 237.275156 342.361401 238.557129 341.151746 239.792695 339.849041 C 240.413379 339.203504 241.022461 338.523073 241.619941 337.81938 C 242.217422 337.109871 242.809102 336.365468 243.38918 335.574539 C 243.679219 335.184891 243.969258 334.777796 244.259297 334.359069 C 245.123613 333.102889 245.976328 331.730396 246.829043 330.206696 C 246.985664 329.933361 247.136484 329.642578 247.287305 329.357611 C 247.420723 329.113354 247.54834 328.880728 247.681758 328.630655 C 249.097148 325.914748 250.51834 322.739404 251.974336 318.930154 C 253.726172 314.353239 255.536016 308.869082 257.473477 302.169455 C 258.123164 299.936247 258.784453 297.563462 259.463145 295.051102 C 260.930742 289.590208 262.485352 283.437252 264.051562 276.749257 C 268.106309 276.092088 272.161055 275.440736 278.21127 268.281673 C 284.261484 261.128425 292.312969 247.473283 295.340977 231.142943 C 298.363184 214.806786 296.361914 195.789616 292.951055 185.10627 C 289.534395 174.417109 284.713945 172.061771 279.893496 169.700618 C 279.992109 167.6128 280.06752 165.530798 280.131328 163.454612 C 280.386562 155.167313 280.351758 147.031221 279.974707 139.191727 C 279.789082 135.266164 279.510645 131.422021 279.145195 127.665112 C 278.95957 125.786658 278.750742 123.931466 278.518711 122.099536 C 278.077852 118.662488 277.555781 115.306859 276.946699 112.044281 C 276.041777 107.147505 274.95123 102.442645 273.698262 97.929702 C 271.60998 90.404253 269.075039 83.408028 266.18625 76.911949 C 265.606172 75.615059 265.014492 74.335617 264.40541 73.073621 C 263.193047 70.555445 261.928477 68.118689 260.611699 65.757536 C 258.639434 62.20999 256.562754 58.84273 254.393262 55.644123 L 254.393262 55.638307 C 253.668164 54.574044 252.937266 53.527227 252.194766 52.497857 C 249.973066 49.409748 247.664355 46.484477 245.297637 43.72786 C 242.930918 40.965427 240.500391 38.365832 238.029258 35.92326 C 237.205547 35.109069 236.376035 34.312325 235.546523 33.533028 C 233.881699 31.968619 232.205273 30.479813 230.517246 29.054979 C 228.829219 27.630145 227.12959 26.269283 225.429961 24.972394 C 222.024902 22.38443 218.608242 20.058171 215.226387 17.976169 C 211.954746 15.963955 208.839727 14.195998 205.846523 12.643219 C 202.84752 11.090441 199.970332 9.747027 197.185957 8.589713 C 191.611406 6.269269 186.384902 4.669966 181.233809 3.530099 C 178.658262 2.960165 176.100117 2.500729 173.530371 2.128527 C 170.960625 1.75051 168.379277 1.453912 165.745723 1.209655 C 163.117969 0.959582 160.432207 0.76185 157.671035 0.575749 C 154.909863 0.395464 152.06168 0.220995 149.103281 0.0348939 L 149.103281 0 L 148.813242 0.0174469 L 148.529004 0 Z M 148.523203 0"),this.pathLeft=new Path2D("M 83.28125 0.3125 C 64.90625 1.96875 50.171875 6.6875 37.59375 14.953125 C 32.828125 18.078125 29.484375 20.84375 25.46875 24.9375 C 19.203125 31.328125 14.578125 38.46875 11.28125 46.796875 C 8.734375 53.1875 8.125 55.859375 5.609375 71.40625 C 2.8125 88.671875 2.15625 92.375 1.46875 94.359375 C 1.25 95 0.84375 96.546875 0.578125 97.796875 L 0.09375 100.078125 L 0.046875 110.75 C -0.015625 120.84375 0 121.546875 0.3125 123.875 C 2.8125 142.65625 9.171875 163 18.875 183.203125 C 23.96875 193.78125 28.328125 201.1875 31.15625 203.984375 C 37.5625 210.328125 47.890625 214.828125 59.671875 216.390625 C 63.71875 216.9375 66.515625 217.078125 71.484375 216.984375 C 78.953125 216.84375 82.125 216.265625 91.296875 213.359375 C 101.8125 210.015625 109.34375 207.03125 117.578125 202.96875 C 124.28125 199.65625 130.28125 196.109375 138.671875 190.546875 C 147.484375 184.6875 148.25 184.0625 150.46875 181.078125 C 155.5625 174.203125 159.671875 166.046875 163.203125 155.78125 C 163.6875 154.359375 164.109375 153.171875 164.140625 153.140625 C 164.171875 153.109375 164.625 153.34375 165.140625 153.65625 C 166.5 154.484375 168.21875 155.25 169.234375 155.46875 C 169.75 155.578125 170.6875 155.640625 171.46875 155.59375 C 172.765625 155.53125 172.84375 155.5 173.859375 154.796875 C 175.34375 153.796875 177.703125 151.65625 178.90625 150.234375 C 180.59375 148.25 183.453125 144.359375 184.53125 142.59375 C 185.09375 141.671875 186.90625 138.84375 188.5625 136.28125 C 193.515625 128.671875 195.109375 125.859375 197 121.40625 C 198.21875 118.5 199 116.125 199.3125 114.3125 C 199.640625 112.40625 199.546875 107.109375 199.15625 105.703125 C 198.40625 102.984375 196.21875 99.921875 193.8125 98.1875 C 192.53125 97.28125 190.28125 96.21875 188.4375 95.6875 C 187.625 95.453125 186.9375 95.25 186.921875 95.234375 C 186.90625 95.21875 187.0625 94.203125 187.265625 92.953125 C 188.546875 85.359375 188.859375 78.53125 188.265625 71.171875 C 187.25 58.609375 182.359375 46.09375 174.46875 35.9375 C 168.03125 27.640625 159.265625 20.171875 149.453125 14.609375 C 137.75 7.984375 124.375 3.484375 110.0625 1.34375 C 103.734375 0.390625 101.953125 0.28125 93.046875 0.234375 C 88.5 0.203125 84.09375 0.25 83.28125 0.3125 Z M 103.640625 1.53125 C 116.15625 2.953125 125.796875 5.265625 136.09375 9.328125 C 151.90625 15.578125 166.21875 26.25 174.671875 38.09375 C 181.578125 47.78125 185.484375 57.734375 186.953125 69.4375 C 187.609375 74.546875 187.53125 83.28125 186.796875 88.40625 C 186.375 91.328125 186.03125 93.359375 185.765625 94.5625 L 185.59375 95.296875 L 183.1875 96.3125 C 181.859375 96.875 179.515625 97.8125 177.984375 98.390625 L 175.203125 99.421875 L 175.28125 104.046875 C 175.40625 111.875 174.9375 116.359375 173.265625 123 C 171.953125 128.25 170.765625 131.796875 166.4375 143.28125 C 165.078125 146.9375 163.265625 151.921875 162.421875 154.375 C 159.96875 161.53125 158.734375 164.578125 156.3125 169.375 C 154.921875 172.15625 153.140625 175.25 151.71875 177.359375 C 150.21875 179.59375 147.921875 182.515625 147.078125 183.265625 C 145.390625 184.78125 136.546875 190.828125 130.859375 194.375 C 119.53125 201.4375 108.859375 206.375 94.40625 211.265625 C 82 215.453125 77.71875 216.234375 68.515625 216.046875 C 62.328125 215.921875 57.90625 215.375 53.046875 214.140625 C 43.984375 211.859375 36.046875 207.671875 31.40625 202.71875 C 29.15625 200.3125 25 193.125 20.5 183.90625 C 11.109375 164.65625 4.484375 144.171875 1.8125 126.171875 C 0.984375 120.5 0.90625 119.546875 0.828125 112.890625 C 0.71875 103.8125 0.984375 100.953125 2.453125 95.3125 C 3.484375 91.40625 4.265625 87.0625 6.796875 71.328125 C 8.84375 58.609375 9.359375 56.078125 10.890625 51.359375 C 15.109375 38.21875 23.015625 27.15625 34.296875 18.59375 C 45.1875 10.328125 59.171875 4.71875 75 2.28125 C 81.4375 1.28125 84.53125 1.109375 94.21875 1.171875 C 99.59375 1.203125 101.203125 1.265625 103.640625 1.53125 Z M 188.484375 96.78125 C 192.671875 98.15625 195.09375 100.125 197.09375 103.765625 C 198.09375 105.59375 198.328125 106.828125 198.328125 110.3125 C 198.34375 114.4375 197.984375 116.015625 195.96875 120.78125 C 194 125.4375 192.21875 128.609375 187.703125 135.5 C 186.265625 137.71875 184.40625 140.59375 183.59375 141.875 C 181.65625 144.953125 178.609375 149.03125 177.078125 150.578125 C 174.5 153.203125 172.203125 154.84375 171.09375 154.84375 C 169.90625 154.84375 166.3125 153.34375 165.125 152.34375 L 164.625 151.921875 L 164.828125 151.109375 C 164.9375 150.65625 166.28125 146.96875 167.796875 142.921875 C 172.125 131.421875 173.78125 126.328125 174.9375 120.96875 C 176.15625 115.25 176.484375 111.90625 176.46875 105.21875 L 176.453125 100.046875 L 179.671875 98.84375 C 181.4375 98.1875 183.59375 97.328125 184.453125 96.953125 C 185.3125 96.578125 186.203125 96.265625 186.4375 96.265625 C 186.671875 96.25 187.59375 96.484375 188.484375 96.78125 Z M 188.484375 96.78125"),this.pathLeftClosed=new Path2D("M 83.28125 0.3125 C 64.90625 1.96875 50.171875 6.6875 37.59375 14.953125 C 32.828125 18.078125 29.484375 20.84375 25.46875 24.9375 C 19.203125 31.328125 14.578125 38.46875 11.28125 46.796875 C 8.734375 53.1875 8.125 55.859375 5.609375 71.40625 C 2.8125 88.671875 2.15625 92.375 1.46875 94.359375 C 1.25 95 0.84375 96.546875 0.578125 97.796875 L 0.09375 100.078125 L 0.046875 110.75 C -0.015625 120.84375 0 121.546875 0.3125 123.875 C 2.8125 142.65625 9.171875 163 18.875 183.203125 C 23.96875 193.78125 28.328125 201.1875 31.15625 203.984375 C 37.5625 210.328125 47.890625 214.828125 59.671875 216.390625 C 63.71875 216.9375 66.515625 217.078125 71.484375 216.984375 C 78.8125 216.84375 81.875 216.296875 90.609375 213.5625 C 109.609375 207.609375 121.6875 201.828125 138.671875 190.546875 C 147.484375 184.6875 148.25 184.0625 150.46875 181.078125 C 155.5625 174.203125 159.671875 166.046875 163.203125 155.78125 C 163.6875 154.359375 164.109375 153.171875 164.140625 153.140625 C 164.171875 153.109375 164.625 153.34375 165.140625 153.65625 C 166.5 154.484375 168.21875 155.25 169.234375 155.46875 C 169.75 155.578125 170.6875 155.640625 171.46875 155.59375 C 172.765625 155.53125 172.84375 155.5 173.859375 154.796875 C 175.34375 153.796875 177.703125 151.65625 178.90625 150.234375 C 180.59375 148.25 183.453125 144.359375 184.53125 142.59375 C 185.09375 141.671875 186.90625 138.84375 188.5625 136.28125 C 193.53125 128.640625 195.125 125.8125 197.015625 121.359375 C 199.21875 116.109375 199.59375 114.359375 199.484375 109.765625 C 199.4375 107.5 199.34375 106.375 199.15625 105.703125 C 198.40625 102.984375 196.21875 99.921875 193.8125 98.1875 C 192.53125 97.28125 190.28125 96.21875 188.4375 95.6875 C 187.625 95.453125 186.9375 95.25 186.921875 95.234375 C 186.90625 95.21875 187.0625 94.203125 187.265625 92.953125 C 188.546875 85.359375 188.859375 78.53125 188.265625 71.171875 C 187.25 58.609375 182.359375 46.09375 174.46875 35.9375 C 168.03125 27.640625 159.265625 20.171875 149.453125 14.609375 C 137.75 7.984375 124.375 3.484375 110.0625 1.34375 C 103.734375 0.390625 101.953125 0.28125 93.046875 0.234375 C 88.5 0.203125 84.09375 0.25 83.28125 0.3125 Z "),this.pathRight=new Path2D("M 98.25 0.460938 C 78.59375 2.058594 60.273438 8.113281 45.140625 18.023438 C 41.640625 20.300781 35.761719 25.03125 32.8125 27.914062 C 23.792969 36.75 17.632812 46.757812 14.347656 57.855469 C 12.445312 64.28125 11.753906 68.796875 11.5625 76.003906 C 11.398438 82.777344 11.707031 86.730469 13.0625 94.402344 L 13.207031 95.296875 L 11.707031 95.726562 C 8.183594 96.757812 5.589844 98.332031 3.808594 100.574219 C 1.140625 103.84375 0.476562 105.867188 0.476562 110.445312 C 0.476562 114.550781 1.09375 116.925781 3.734375 122.867188 C 5.402344 126.601562 7.28125 129.835938 10.898438 135.265625 C 12.683594 137.972656 14.632812 141.011719 15.203125 142.023438 C 16.203125 143.777344 17.75 145.9375 20.628906 149.558594 C 22.175781 151.542969 25.722656 154.699219 27.03125 155.28125 C 28.886719 156.121094 31.8125 155.515625 34.597656 153.722656 C 35.265625 153.296875 35.835938 152.984375 35.90625 153.023438 C 35.953125 153.082031 36.429688 154.425781 36.976562 156.023438 C 40.046875 165.25 44.378906 173.894531 49.160156 180.4375 C 51.585938 183.746094 51.824219 183.980469 55.632812 186.609375 C 76.121094 200.800781 88.515625 206.953125 110.359375 213.828125 C 118.261719 216.320312 122.710938 217.039062 130.183594 217.039062 C 146.433594 217.039062 160.996094 211.996094 169.253906 203.488281 C 173.394531 199.226562 182.722656 181.078125 188.363281 166.320312 C 194.644531 149.949219 198.425781 135.054688 199.996094 120.664062 C 200.472656 116.304688 200.402344 104.757812 199.878906 101.097656 C 199.402344 97.867188 198.6875 94.59375 198.308594 94.050781 C 197.902344 93.40625 196.5 85.308594 193.644531 67.320312 C 191.90625 56.414062 191.097656 53.046875 188.625 46.777344 C 178.082031 20.046875 151.289062 2.933594 115.953125 0.34375 C 112.195312 0.0703125 102.246094 0.128906 98.25 0.460938 Z M 118.925781 1.394531 C 139.105469 3.496094 155.976562 10.097656 168.800781 20.921875 C 179.605469 30.035156 186.863281 41.636719 190.40625 55.441406 C 191.191406 58.5 191.527344 60.308594 193.40625 72.089844 C 195.644531 86.046875 196.761719 92.414062 197.238281 93.796875 C 197.808594 95.433594 198.6875 99.636719 199.046875 102.363281 C 199.425781 105.480469 199.449219 116.265625 199.046875 120.179688 C 197.238281 137.992188 191.242188 158.667969 181.984375 178.976562 C 177.367188 189.082031 171.324219 200.023438 168.96875 202.515625 C 165.328125 206.332031 161.1875 209.078125 155.40625 211.492188 C 148.242188 214.488281 140.675781 216.007812 131.777344 216.203125 C 123.472656 216.398438 118.878906 215.675781 110.003906 212.851562 C 90.609375 206.664062 78.023438 200.664062 62.53125 190.25 C 53.632812 184.273438 52.730469 183.570312 51.136719 181.507812 C 45.304688 173.933594 41.210938 165.816406 37.429688 154.25 C 36.644531 151.894531 35.097656 147.550781 33.957031 144.613281 C 29.816406 133.808594 28.292969 129.386719 26.863281 123.976562 C 25.054688 117.082031 24.484375 112.058594 24.628906 104.660156 L 24.722656 99.480469 L 22.914062 98.839844 C 20.25 97.90625 14.492188 95.53125 14.324219 95.316406 C 14.15625 95.101562 13.300781 90.058594 12.898438 86.984375 C 12.492188 83.710938 12.347656 75.652344 12.660156 72.1875 C 13.683594 60.992188 16.609375 51.820312 22.105469 42.785156 C 26.578125 35.464844 31.148438 30.230469 38.214844 24.347656 C 48.753906 15.609375 60.773438 9.457031 75.523438 5.308594 C 83.355469 3.109375 91.492188 1.765625 101.199219 1.042969 C 103.675781 0.871094 116.191406 1.101562 118.925781 1.394531 Z M 15.441406 96.835938 C 16.277344 97.222656 18.488281 98.082031 20.34375 98.78125 L 23.722656 100.027344 L 23.628906 102.402344 C 23.367188 107.875 23.699219 113.421875 24.605469 118.328125 C 25.816406 124.890625 27.53125 130.398438 32.074219 142.375 C 36.050781 152.867188 35.789062 151.855469 34.835938 152.535156 C 33.621094 153.375 31.242188 154.523438 30.21875 154.757812 C 28.363281 155.164062 27.53125 154.855469 25.339844 153.003906 C 24.269531 152.089844 22.890625 150.804688 22.320312 150.160156 C 20.414062 148.019531 17.609375 144.144531 16.015625 141.496094 C 15.132812 140.058594 13.46875 137.429688 12.277344 135.65625 C 7.804688 128.980469 5.878906 125.53125 3.664062 120.199219 C 2 116.246094 1.5 113.929688 1.5 110.484375 C 1.523438 106.84375 1.902344 105.128906 3.1875 103.046875 C 4.902344 100.261719 6.828125 98.546875 9.492188 97.417969 C 10.800781 96.875 13.085938 96.152344 13.585938 96.132812 C 13.777344 96.132812 14.609375 96.445312 15.441406 96.835938 Z M 15.441406 96.835938"),this.pathRightClosed=new Path2D("M 108.480469 0.171875 C 104.628906 0.175781 100.5 0.273438 98.25 0.460938 C 78.59375 2.058594 60.273438 8.113281 45.140625 18.023438 C 41.640625 20.300781 35.765625 25.03125 32.8125 27.914062 C 23.792969 36.75 17.632812 46.757812 14.347656 57.855469 C 12.445312 64.28125 11.753906 68.796875 11.5625 76.003906 C 11.398438 82.777344 11.707031 86.730469 13.0625 94.402344 L 13.207031 95.296875 L 11.707031 95.726562 C 8.183594 96.757812 5.589844 98.332031 3.808594 100.574219 C 1.140625 103.84375 0.476562 105.867188 0.476562 110.445312 C 0.476562 114.550781 1.09375 116.925781 3.734375 122.863281 C 5.402344 126.601562 7.28125 129.835938 10.898438 135.265625 C 12.683594 137.972656 14.632812 141.011719 15.203125 142.023438 C 16.203125 143.777344 17.75 145.9375 20.628906 149.558594 C 22.175781 151.542969 25.722656 154.699219 27.03125 155.28125 C 28.886719 156.121094 31.8125 155.515625 34.597656 153.722656 C 35.265625 153.296875 35.835938 152.984375 35.90625 153.023438 C 35.953125 153.082031 36.429688 154.425781 36.976562 156.023438 C 40.046875 165.25 44.378906 173.894531 49.160156 180.4375 C 51.585938 183.746094 51.824219 183.980469 55.632812 186.609375 C 76.121094 200.800781 88.515625 206.953125 110.363281 213.828125 C 118.261719 216.320312 122.710938 217.039062 130.183594 217.039062 C 146.433594 217.039062 160.996094 211.996094 169.253906 203.488281 C 173.394531 199.226562 182.722656 181.078125 188.363281 166.320312 C 194.644531 149.949219 198.425781 135.054688 199.996094 120.664062 C 200.472656 116.304688 200.402344 104.757812 199.878906 101.097656 C 199.402344 97.867188 198.6875 94.59375 198.308594 94.050781 C 197.902344 93.40625 196.5 85.308594 193.644531 67.320312 C 191.90625 56.414062 191.097656 53.046875 188.625 46.777344 C 178.082031 20.046875 151.289062 2.933594 115.953125 0.34375 C 114.308594 0.222656 111.480469 0.167969 108.480469 0.171875 Z"),this.pathCenterOrigSize=[300,400],this.pathLeftOrigSize=[200,220],this.pathRightOrigSize=[200,220]}updateOverlayOnStart(){this.adjustElements(),verilive.config.render.overlay&&this.drawDefaultTransparentLayer()}updateOverlay(e){this.data=e,this.adjustElements(),this.drawOverlay()}setLoadingVisibility(e){this.animationLoading.style.visibility=!0===e?"visible":"hidden"}adjustElements(){this.adjustCanvas(),this.adjustAnimationLoading()}adjustCanvas(){if(verilive.config.render.rotated){this.overlayCanvas.width=this.video.offsetHeight,this.overlayCanvas.height=this.video.offsetWidth;let e=verilive.htmlElements.video.getBoundingClientRect().top,t=verilive.htmlElements.overlayCanvas.getBoundingClientRect().top;this.y=this.y+(e-t);let i=verilive.htmlElements.video.getBoundingClientRect().left,r=verilive.htmlElements.overlayCanvas.getBoundingClientRect().left;this.x=this.x-(i-r),verilive.htmlElements.overlayCanvas.style.top=this.x+"px",verilive.htmlElements.overlayCanvas.style.left=this.y+"px"}else this.overlayCanvas.width=this.video.offsetWidth,this.overlayCanvas.height=this.video.offsetHeight}adjustAnimationLoading(){this.animationLoading.style.width=this.video.offsetWidth+"px",this.animationLoading.style.height=this.video.offsetHeight+"px"}cleanCanvas(){this.ctx.clearRect(0,0,this.ctx.canvas.width,this.ctx.canvas.height)}animateOverlay(){this.cleanCanvas();const e=Math.round(this.frameRate*this.animationDuration),t=this.diffLeft*this.frame,i=this.diffLeft*e,r=this.previousData.ovalLeft,a=this.diffRight*this.frame,s=this.diffRight*e,n=this.previousData.ovalRight,o=this.diffTop*this.frame,l=this.diffTop*e,h=this.previousData.ovalTop,c=this.diffBottom*this.frame,u=this.diffBottom*e,v=this.previousData.ovalBottom,f=d.easeInOutQuad(t/i,t,r,i,i),p=d.easeInOutQuad(a/s,a,n,s,s),g=d.easeInOutQuad(o/l,o,h,l,l),m=d.easeInOutQuad(c/u,c,v,u,u);this.data.showOverlay&&verilive.config.render.overlay&&this.drawTransparentLayer(),this.data.showOval&&verilive.config.render.oval&&(verilive.config.render.faceContourInsteadOfOval?this.drawFaceContour(f,p,g,m):this.drawOval(f,p,g,m)),this.data.showHint&&verilive.config.render.hint&&this.drawHint(),this.data.showArrow&&verilive.config.render.arrow&&this.drawArrow(),this.frame++,this.frame===e?(this.isAnimating=!1,this.previousData={},this.frame=0):requestAnimationFrame(this.animateOverlay.bind(this))}drawAnimatedOverlay(){this.isAnimating=!0,requestAnimationFrame(this.animateOverlay.bind(this))}drawStaticOverlay(){this.cleanCanvas(),this.data.showOverlay&&verilive.config.render.overlay&&this.drawTransparentLayer(),this.data.showOval&&verilive.config.render.oval&&(verilive.config.render.faceContourInsteadOfOval?this.drawFaceContour(this.data.ovalLeft,this.data.ovalRight,this.data.ovalTop,this.data.ovalBottom):this.drawOval(this.data.ovalLeft,this.data.ovalRight,this.data.ovalTop,this.data.ovalBottom)),this.data.showHint&&verilive.config.render.hint&&this.drawHint(),this.data.showArrow&&verilive.config.render.arrow&&this.drawArrow()}isSameOvalData(){const e=Math.round(this.frameRate*this.animationDuration),t=this.previousData.ovalLeft&&(this.data.ovalLeft-this.previousData.ovalLeft)/e,i=this.previousData.ovalRight&&(this.data.ovalRight-this.previousData.ovalRight)/e,r=this.previousData.ovalTop&&(this.data.ovalTop-this.previousData.ovalTop)/e,a=this.previousData.ovalBottom&&(this.data.ovalBottom-this.previousData.ovalBottom)/e;return t&&i&&r&&a?(this.diffLeft=t,this.diffRight=i,this.diffTop=r,this.diffBottom=a):(this.previousData.ovalLeft=this.data.ovalLeft,this.previousData.ovalRight=this.data.ovalRight,this.previousData.ovalTop=this.data.ovalTop,this.previousData.ovalBottom=this.data.ovalBottom),!(t&&i&&r&&a)}drawOverlay(){this.isAnimating||(this.isSameOvalData()?this.drawStaticOverlay():this.drawAnimatedOverlay())}drawTransparentLayer(){this.ctx.globalAlpha=verilive.config.render.overlayTransparency[this.data.render.overlayTransparency],this.ctx.fillStyle=verilive.config.render.overlayColor[this.data.render.overlayColor],this.ctx.fillRect(0,0,this.overlayCanvas.width,this.overlayCanvas.height),this.ctx.globalAlpha=1}drawDefaultTransparentLayer(){this.ctx.globalAlpha=verilive.config.render.overlayTransparency.default,this.ctx.fillStyle=verilive.config.render.overlayColor.default,this.ctx.fillRect(0,0,this.overlayCanvas.width,this.overlayCanvas.height),this.ctx.globalAlpha=1}drawOval(e,t,i,r){const a=this.relXToAbs(1-t),s=this.relXToAbs(1-e),n=this.relYToAbs(i),o=this.relYToAbs(r),d=Math.floor((s-a)/2),l=Math.floor((o-n)/2),h=a+d,c=n+l;this.ctx.globalCompositeOperation="destination-out",this.ctx.imageSmoothingEnabled=!0,this.ctx.beginPath(),this.ctx.ellipse(h,c,d,l,0,0,2*Math.PI),this.ctx.fill(),this.ctx.globalCompositeOperation="source-over",this.ctx.strokeStyle=verilive.config.render.ovalRingColor[this.data.render.ovalRingColor],this.ctx.lineWidth=Math.floor(.005*this.overlayCanvas.width*verilive.config.render.ovalWidth),this.ctx.ellipse(h,c,d,l,0,0,2*Math.PI),this.ctx.stroke(),this.ctx.closePath()}drawFaceContour(e,t,i,r){let a,s,n;const o=this.relXToAbs(1-t),d=this.relXToAbs(1-e),l=this.relYToAbs(i),h=this.relYToAbs(r);this.data.showArrow?("left"===this.data.arrowType&&(a=this.pathLeft,s=this.pathLeftClosed,n=this.pathLeftOrigSize),"right"===this.data.arrowType&&(a=this.pathRight,s=this.pathRightClosed,n=this.pathRightOrigSize)):(a=this.pathCenter,s=this.pathCenter,n=this.pathCenterOrigSize);let c=(d-o)/n[0],u=(h-l)/n[1];this.ctx.translate(o,l),this.ctx.scale(c,u),this.ctx.globalCompositeOperation="destination-out",this.ctx.fill(s),this.ctx.globalCompositeOperation="source-over",this.ctx.strokeStyle=verilive.config.render.ovalRingColor[this.data.render.ovalRingColor],this.ctx.lineWidth=Math.floor(.003*this.overlayCanvas.width*verilive.config.render.ovalWidth),this.ctx.stroke(a),this.ctx.setTransform(1,0,0,1,0,0)}drawArrow(){let e={left:this.relXToAbs(1-this.data.ovalRight),right:this.relXToAbs(1-this.data.ovalLeft),top:this.relYToAbs(this.data.ovalTop),bottom:this.relYToAbs(this.data.ovalBottom)},t=this.getLinePoints(e,this.data.arrowType,this.data.arrowProgress);this.overlayCanvas.width>this.overlayCanvas.height?this.ctx.lineWidth=Math.floor(.012*this.overlayCanvas.width):this.ctx.lineWidth=Math.floor(.012*this.overlayCanvas.height),this.ctx.strokeStyle=verilive.config.render.arrowColor[this.data.render.arrowColor],this.drawArrowLines(t[0]),this.ctx.strokeStyle=verilive.config.render.arrowProgressColor[this.data.render.arrowProgressColor],this.drawArrowLines(t[1])}drawArrowLines(e){this.ctx.beginPath(),this.ctx.moveTo(e[0],e[1]),this.ctx.lineTo(e[2],e[3]),this.ctx.stroke(),this.ctx.beginPath(),this.ctx.moveTo(e[4],e[5]),this.ctx.lineTo(e[6],e[7]),this.ctx.stroke(),this.ctx.beginPath(),this.ctx.moveTo(e[8],e[9]),this.ctx.lineTo(e[10],e[11]),this.ctx.stroke()}getLinePoints(e,t,i){let r,a,s,n,o,d,l,h,c,u,v,f,p,g,m,C,b,w;const y=.05*3,M=.025*3;i>1&&(i=1),i<0&&(i=0);const S=e.right-e.left,O=e.top+3*(e.bottom-e.top)/4;if(r=e.left+.32*S,a=O,s=e.right-.32*S,n=O,"left"===t){o=r+y*S,d=O+M*S,l=r+y*S,h=O-M*S,c=r,u=a,p=s,g=n,v=r+(1-i)*(s-r),f=O;let e=(o-v)/(o-r);e>1&&(e=1),e<0&&(e=0),m=o-e*(o-r),C=d-e*(d-a),b=l-e*(o-r),w=h-e*(h-a)}else{if("right"!==t)return null;{o=s-y*S,d=O+M*S,l=s-y*S,h=O-M*S,c=s,u=n,p=r,g=a,v=r+i*(s-r),f=O;let e=(v-o)/(s-o);e>1&&(e=1),e<0&&(e=0),m=o+e*(s-o),C=d-e*(d-n),b=l+e*(s-o),w=h-e*(h-n)}}return[[r,a,s,n,o,d,c,u,l,h,c,u],[p,g,v,f,o,d,m,C,l,h,b,w]]}drawHint(){let e;this.delayPoint||(this.delayPoint=performance.now()),this.ctx.textAlign="center",this.ctx.textBaseline="middle",e=verilive.config.render.hintUseProgressiveFontSize?this.overlayCanvas.width>this.overlayCanvas.height?Math.floor(this.overlayCanvas.width/40*verilive.config.render.hintProgressiveFontSizeMultiplier):Math.floor(this.overlayCanvas.height/40*verilive.config.render.hintProgressiveFontSizeMultiplier):verilive.config.render.hintFontSize,this.ctx.font="bold "+e+"px "+verilive.config.render.hintFontType,this.hintText||(this.hintText=verilive.config.hints[this.data.render.hintText]);const t=1e3*this.hintDelayDuration;(performance.now()-this.delayPoint>=t||this.data.livenessPassed||this.data.livenessFailed)&&(this.hintText=verilive.config.hints[this.data.render.hintText],delete this.delayPoint);const i=this.ctx.measureText(this.hintText).width,r=this.ctx.measureText("M").width,a=this.overlayCanvas.width/2,s=this.relYToAbs(.2)+3*r,n=2*r/3,o=2*n/3;this.ctx.fillStyle=verilive.config.render.hintCloudColor[this.data.render.hintCloudColor],this.fillRoundRect(a-i/2-n,s-r/2-n,i+2*n,r+n+n,o),this.ctx.fillStyle=verilive.config.render.hintTextColor[this.data.render.hintTextColor],this.ctx.fillText(this.hintText,a,s)}fillRoundRect(e,t,i,r,a){if(void 0===a&&(a=5),"number"==typeof a)a={tl:a,tr:a,br:a,bl:a};else{const e={tl:0,tr:0,br:0,bl:0};for(let t in e)a[t]=a[t]||e[t]}this.ctx.beginPath(),this.ctx.moveTo(e+a.tl,t),this.ctx.lineTo(e+i-a.tr,t),this.ctx.quadraticCurveTo(e+i,t,e+i,t+a.tr),this.ctx.lineTo(e+i,t+r-a.br),this.ctx.quadraticCurveTo(e+i,t+r,e+i-a.br,t+r),this.ctx.lineTo(e+a.bl,t+r),this.ctx.quadraticCurveTo(e,t+r,e,t+r-a.bl),this.ctx.lineTo(e,t+a.tl),this.ctx.quadraticCurveTo(e,t,e+a.tl,t),this.ctx.closePath(),this.ctx.fill()}relXToAbs(e){return Math.floor(e*this.overlayCanvas.width)}relYToAbs(e){return Math.floor(e*this.overlayCanvas.height)}}class h{constructor(e){if(this.wrapper=document.getElementById("id_verilive"),!this.wrapper)throw`${verilive.name}: Couldn't find element with id="id_verilive"!`;this.videoStarted=!1,this.stream=e,this.innerWrapper=document.createElement("div"),this.video=document.createElement("video"),this.overlayCanvas=document.createElement("canvas"),this.wrapper.appendChild(this.innerWrapper),this.innerWrapper.appendChild(this.video),this.innerWrapper.appendChild(this.overlayCanvas),this.animationLoading=document.createElement("div"),this.ball1=document.createElement("div"),this.ball2=document.createElement("div"),this.ball3=document.createElement("div"),this.ball4=document.createElement("div"),this.wrapper.appendChild(this.innerWrapper),this.innerWrapper.appendChild(this.video),this.innerWrapper.appendChild(this.overlayCanvas),this.animationLoading.appendChild(this.ball1),this.animationLoading.appendChild(this.ball2),this.animationLoading.appendChild(this.ball3),this.animationLoading.appendChild(this.ball4),this.innerWrapper.appendChild(this.animationLoading),this.innerWrapper.className="verilive_innerWrapper",this.video.className="verilive_video",this.overlayCanvas.className="verilive_overlayCanvas",this.animationLoading.className="verilive_loading",this.ball1.className="verilive_color",this.ball2.className="verilive_color",this.ball3.className="verilive_color",this.ball4.className="verilive_color",this.video.setAttribute("autoplay",""),this.styles="\n        .verilive_innerWrapper {\n            position: relative;\n            width: 100%;\n        }\n\n        .verilive_video {\n            position: absolute;\n            display: inline;\n            top: 0;\n            left: 0;\n            width: 100%;\n            overflow: hiden;\n            transform: scaleX(-1);\n        }\n\n        .verilive_overlayCanvas {\n            position: absolute;\n            display: inline;\n            top: 0;\n            bottom: 0;\n            left: 0;\n            right:0;\n            z-index: 10;\n        }\n\n        .verilive_innerWrapper {\n            position: relative;\n            width: 100%;\n        }\n\n        .verilive_loading {\n            display: flex;\n            justify-content: center;\n            align-items: center;\n            visibility: hidden;\n            z-index: 15;\n        }\n\n        .verilive_loading > div {\n            width: 3vw;\n            height: 3vw;\n            border-radius: 100%;\n            margin: 2vw;\n            background-image: linear-gradient(145deg, rgba(255,255,255,0.5) 0%, rgba(0,0,0,0) 100%);\n        }\n\n        .verilive_color {\n            background: #f15228;\n            animation: bounce 1.5s 0.5s linear infinite;\n        }\n\n        @keyframes bounce {\n            0%, 50%, 100% {\n            transform: scale(1);\n            filter: blur(0px);\n            }\n            25% {\n                transform: scale(0.6);\n                filter: blur(3px);\n            }\n            75% {\n                filter: blur(3px);\n                transform: scale(1.4);\n            }\n        }\n    ",verilive.config.rotated?this.styles+="\n            .verilive_innerWrapper {\n                transform: rotate(90deg);\n                top: 30vw;\n            }\n\n            .verilive_overlayCanvas {\n                transform: rotate(-90deg);\n            }\n        ":this.styles+="\n            .verilive_innerWrapper {\n                transform: rotate(0deg);\n                top: 0;\n            }\n\n            .verilive_overlayCanvas {\n                transform: rotate(0deg);\n            }\n        ",this.styleSheet=document.createElement("style"),this.styleSheet.innerHTML=this.styles,document.head.appendChild(this.styleSheet),void 0!==this.video.srcObject?this.video.srcObject=e:void 0!==this.video.mozSrcObject?this.video.mozSrcObject=e:window.URL.createObjectURL?this.video.src=window.URL.createObjectURL(e):window.webkitURL?this.video.src=window.webkitURL.createObjectURL(e):this.video.src=e,this.video.playsInline=!0;const t=e.getTracks().shift();t&&console.log(`${verilive.name}: WebCam name - ${t.label}`);const i=!/rear|back|environment/gi.test(t.label);/iPad|iPhone|iPod/.test(navigator.userAgent)&&window.MSStream,i||(console.log(`${verilive.name}: Not user-facing camera - disable mirroring preview!`),this.video.style.transform="none"),this.video.addEventListener("resize",(()=>this.onResize())),this.video.addEventListener("loadstart",(()=>this.handleLoadStart()))}dispose(){this.video.pause();try{this.stream.getTracks()[0].stop()}catch(e){console.log("VeriLive: "+e)}try{void 0!==this.video.srcObject?this.video.removeAttribute("srcObject"):void 0!==this.video.mozSrcObject?this.video.removeAttribute("mozSrcObject"):(window.URL.createObjectURL||window.webkitURL,this.video.removeAttribute("src"))}catch(e){console.log("VeriLive: "+e)}try{for(let e in this.wrapper)delete this.wrapper[e]}catch(e){console.log("VeriLive: "+e)}this.wrapper.innerHTML=""}handleLoadStart(){this.video.play(),this.video.removeEventListener("loadstart",this.handleLoadStart)}onResize(){this.videoStarted=!0,console.log(`${verilive.name}: Video resolution - ${this.video.videoWidth}x${this.video.videoHeight}`)}relToVideoX(e){return Math.floor(e*this.video.videoWidth)}relToVideoY(e){return Math.floor(e*this.video.videoHeight)}}const c={recordVideo:!1,rotated:!1,lang:"custom",render:{oval:!0,faceContourInsteadOfOval:!0,ovalRingColor:{default:"#F5F542",actionSuccess:"#00F500",actionFailure:"#F50000",sessionSuccess:"#00F500",sessionFailure:"#F50000"},ovalWidth:1,overlay:!0,overlayColor:{default:"#2F4F4F"},overlayTransparency:{default:.55},arrow:!0,arrowColor:{default:"#F0F0F0"},arrowProgressColor:{default:"#404040"},hint:!0,hintTextColor:{default:"#C8C9CC"},hintFontType:"Arial",hintUseProgressiveFontSize:!0,hintProgressiveFontSizeMultiplier:1,hintFontSize:25,hintCloudColor:{default:"#2D312F"}},hints:{noHint:"",noFace:"  ",badLight:" ",closer:"",away:"",closerToCenter:"   ",targetLeft:"   ",targetRight:"   ",targetCenter:" ",sessionSuccess:" !",sessionFailure:"  !",sessionError:" - .  "}},u={ru:{noHint:"",noFace:"  ",badLight:" ",closer:"",away:"",closerToCenter:"   ",targetLeft:"   ",targetRight:"   ",targetCenter:" ",sessionSuccess:" !",sessionFailure:"  !",sessionError:" - .  "},kz:{noHint:"",noFace:"  ",badLight:"   ",closer:"",away:"",closerToCenter:"  ",targetLeft:"   ",targetRight:"   ",targetCenter:" ",sessionSuccess:" ",sessionFailure:" ",sessionError:"  .   "},en:{noHint:"",noFace:"Cannot find you",badLight:"Please try to fix light",closer:"Move Closer",away:"Move Further",closerToCenter:"Move Closer To Center",targetLeft:"Slowly Turn Head Left",targetRight:"Slowly Trun Head Right",targetCenter:"Look straight",sessionSuccess:"You have passed check!",sessionFailure:"You failed to pass check",sessionError:"Some error happened, please try again"}};var v=i(972);class f{constructor(){this.name="VeriLive",this.started=!1,this.version="1.4.4",this.facingMode="front",this.sendPhotoForPassive=!1,this.recordedBlobs=[],this.config=c,this.hostHeader="verilive"}getDefaultConfig(){return c}getCurrentConfig(){return this.config}async init(e,t,i,r,s,d,l){try{this.url=e,this.apiKey=t,this.successCallback=i,this.failCallback=r,this.errorCallback=s,this.updateCallback=d,this.initConfig(l),this.initLang(),console.log(`${this.name}: Frontend version - ${this.version}`);const h=await async function(e){try{var t;!function(e){const t=e.getBrowser();let i=e.satisfies({android:">7",ios:">11",safari:">7",chrome:">57",firefox:">52",opera:">44",msie:">11",msedge:">16"});if(void 0===i&&"Microsoft Edge"===t.name&&t.version.split(".")[0]>16&&(i=!0),!i)throw new Error("en"===verilive.lang?verilive.name+": Unsupported browser. Please, use latest Chrome, Firefox, Opera, Safari or Edge browser.":verilive.name+":    . ,    Chrome, Firefox, Opera, Safari  Edge.");console.log(`${verilive.name}: Browser - ${t.name} v${t.version}`)}(a().getParser(navigator.userAgent));const r=null===(t=navigator.mediaDevices)||void 0===t?void 0:t.getSupportedConstraints(),s={};null!=r&&r.facingMode&&(s.facingMode={ideal:e}),null!=r&&r.frameRate&&(s.frameRate={ideal:25});const d=r?s:await async function(e){try{var t;const i=await(null===(t=navigator.mediaDevices)||void 0===t?void 0:t.enumerateDevices()),r=null==i?void 0:i.filter((e=>"videoinput"===e.kind));!function(e){if(!e||e.length<1)throw new o}(r);const a=(e=>"environment"===e?/rear|back|environment/gi:/front|user|face/gi)(e);return function(e,t,i){return e.length>0?e[0].deviceId:1===t.length||"user"===i?t[0].deviceId:{deviceId:t[1].deviceId}}(r.filter((({label:e})=>a.test(e))),r,e)}catch(e){throw e}}(e),l={width:{exact:1920},height:{exact:1080}},h={width:{exact:1280},height:{exact:720}},c={width:{ideal:1920},height:{ideal:1080}},u=[];let v;u.push(n(n(n({},d),l),{},{facingMode:{exact:"face"}})),u.push(n(n(n({},d),l),{},{facingMode:{exact:"front"}})),u.push(n(n(n({},d),l),{},{facingMode:{exact:"user"}})),u.push(n(n(n({},d),h),{},{facingMode:{exact:"face"}})),u.push(n(n(n({},d),h),{},{facingMode:{exact:"front"}})),u.push(n(n(n({},d),h),{},{facingMode:{exact:"user"}})),u.push(n(n(n({},d),c),{},{facingMode:{exact:"face"}})),u.push(n(n(n({},d),c),{},{facingMode:{exact:"front"}})),u.push(n(n(n({},d),c),{},{facingMode:{exact:"user"}})),u.push(n(n(n({},d),c),{},{facingMode:{ideal:"user"}}));for(let e of u){if(v)break;try{var i;v=await(null===(i=navigator.mediaDevices)||void 0===i?void 0:i.getUserMedia({video:e}))}catch(e){}}return v}catch(e){throw e}}(this.facingMode,this.name);this.onCamera(h)}catch(e){throw console.error("Liveness.init",e),e}}dispose(){try{this.stop()}catch(e){}this.htmlElements.dispose()}initConfig(e){this.config=function e(t,i){let r={};for(var a in t)t.hasOwnProperty(a)&&("object"==typeof t[a]&&null!==t[a]?r[a]=e(t[a],i[a]):void 0!==i&&null!==i[a]&&void 0!==i[a]&&null!==i[a]?r[a]=i[a]:r[a]=t[a]);return r}(c,e),console.log(this.config)}initLang(){"custom"!=this.config.lang&&this.config.lang in u&&(this.config.hints=u[this.config.lang])}onCamera(e){try{this.stream=e,this.htmlElements=new h(e),this.overlay=new l(this.htmlElements.video,this.htmlElements.overlayCanvas,this.htmlElements.animationLoading),this.overlay.adjustElements()}catch(e){throw e}}start(){if(console.log(`${this.name}: Start`),!this.started){this.started=!0,this.jsToken=(0,v.v4)(),this.frame_num=0,this.canSendNewFrame=!0,this.interval=setInterval((()=>this.update()),100),this.config.recordVideo&&this.startRecording();try{this.overlay.updateOverlayOnStart()}catch(e){console.log(e)}return this.jsToken}}stop(){console.log(`${this.name}: Stop`),this.started&&(clearInterval(this.interval),this.config.recordVideo&&this.stopRecording(),this.started=!1)}generateToken(){return function(e){const t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789";let i="";for(let e=0;e<50;e++)i+=t.charAt(Math.floor(Math.random()*t.length));return i}()}update(){this.canSendNewFrame&&this.htmlElements.videoStarted&&this.started&&(this.canSendNewFrame=!1,this.sendActiveFramePost(),this.frame_num++)}sendActiveFramePost(){const e=new FormData;if(e.append("frame_num",this.frame_num),e.append("frontend_version",this.version),this.config.rotated?(e.append("width",this.htmlElements.video.videoHeight),e.append("height",this.htmlElements.video.videoWidth)):(e.append("width",this.htmlElements.video.videoWidth),e.append("height",this.htmlElements.video.videoHeight)),this.frame_num>0){this.prepareFrameForSending();const t=this.getBlobFromCanvas(this.roiCanvas);if(e.append("image",t,"upload1.jpeg"),this.sendPhotoForPassive){this.sendPhotoForPassive=!1;const t=this.getBlobFromCanvas(this.fraudCanvas);e.append("fraud_image",t,"upload2.jpeg"),e.append("hasFraudImage","true")}else e.append("hasFraudImage","false")}const t=new XMLHttpRequest;t.open("POST",verilive.url,!0),t.onload=function(){verilive.handleResult(this.status,this.response,this.responseText)}.bind(t),t.setRequestHeader("jsToken",verilive.jsToken),""!==verilive.apiKey&&t.setRequestHeader("apikey",verilive.apiKey),t.send(e)}sendBestFramePost(e){const t=new FormData;t.append("image",e,"best_frame.jpeg");const i=new XMLHttpRequest;i.open("POST",verilive.url+"_best_frame",!1),i.setRequestHeader("jsToken",verilive.jsToken),""!==verilive.apiKey&&i.setRequestHeader("apikey",verilive.apiKey),i.send(t)}prepareFrameForSending(){this.copyCanvas=document.createElement("canvas"),this.config.rotated?(this.copyCanvas.width=this.htmlElements.video.videoHeight,this.copyCanvas.height=this.htmlElements.video.videoWidth):(this.copyCanvas.width=this.htmlElements.video.videoWidth,this.copyCanvas.height=this.htmlElements.video.videoHeight);const e=this.copyCanvas.getContext("2d");let t,i;this.config.rotated?(e.rotate(-Math.PI/2),e.translate(-this.htmlElements.video.videoWidth,0),e.drawImage(this.htmlElements.video,0,0)):e.drawImage(this.htmlElements.video,0,0,this.copyCanvas.width,this.copyCanvas.height,0,0,this.copyCanvas.width,this.copyCanvas.height),this.config.rotated?(t=this.htmlElements.relToVideoX(this.data.roiBottom)-this.htmlElements.relToVideoX(this.data.roiTop),i=this.htmlElements.relToVideoY(this.data.roiRight)-this.htmlElements.relToVideoY(this.data.roiLeft)):(t=this.htmlElements.relToVideoX(this.data.roiRight)-this.htmlElements.relToVideoX(this.data.roiLeft),i=this.htmlElements.relToVideoY(this.data.roiBottom)-this.htmlElements.relToVideoY(this.data.roiTop)),this.roiCanvas=document.createElement("canvas"),this.config.rotated?(this.roiCanvas.width=this.data.roiWidth,this.roiCanvas.height=Math.floor(this.data.roiWidth*t/i)):(this.roiCanvas.width=this.data.roiWidth,this.roiCanvas.height=Math.floor(this.data.roiWidth*i/t));const r=this.roiCanvas.getContext("2d");if(this.config.rotated?r.drawImage(this.copyCanvas,this.htmlElements.relToVideoX(this.data.roiTop),this.htmlElements.relToVideoY(this.data.roiLeft),i,t,0,0,this.roiCanvas.width,this.roiCanvas.height):r.drawImage(this.copyCanvas,this.htmlElements.relToVideoX(this.data.roiLeft),this.htmlElements.relToVideoY(this.data.roiTop),t,i,0,0,this.roiCanvas.width,this.roiCanvas.height),this.sendPhotoForPassive){this.fraudCanvas=document.createElement("canvas"),this.fraudCanvas.width=this.data.fraudWidth,this.config.rotated?this.fraudCanvas.height=Math.floor(this.data.fraudWidth*t/i):this.fraudCanvas.height=Math.floor(this.data.fraudWidth*i/t);const e=this.fraudCanvas.getContext("2d");this.config.rotated?e.drawImage(this.copyCanvas,this.htmlElements.relToVideoX(this.data.roiTop),this.htmlElements.relToVideoY(this.data.roiLeft),i,t,0,0,this.fraudCanvas.width,this.fraudCanvas.height):e.drawImage(this.copyCanvas,this.htmlElements.relToVideoX(this.data.roiLeft),this.htmlElements.relToVideoY(this.data.roiTop),t,i,0,0,this.fraudCanvas.width,this.fraudCanvas.height)}}saveBestFrame(){this.bestFrame=this.copyCanvas,this.bestData=this.data}getBestFrame(){const e=this.htmlElements.relToVideoX(this.bestData.centeredRoiLeft),t=this.htmlElements.relToVideoX(this.bestData.centeredRoiRight),i=this.htmlElements.relToVideoY(this.bestData.centeredRoiTop),r=this.htmlElements.relToVideoY(this.bestData.centeredRoiBottom);return this.bestCenteredFrame=document.createElement("canvas"),this.bestCenteredFrame.width=t-e,this.bestCenteredFrame.height=r-i,this.bestCenteredFrame.getContext("2d").drawImage(this.bestFrame,e,i,t-e,r-i,0,0,t-e,r-i),this.bestCenteredFrame}handleResult(e,t,i){if(this.overlay.setLoadingVisibility(!1),e>=200&&e<400)if(this.data=JSON.parse(t),this.overlay.updateOverlay(this.data),this.callUpdateCallback(),this.data.bestFrame&&this.saveBestFrame(),this.data.sendPhotoForPassive&&(this.sendPhotoForPassive=!0),this.data.livenessPassed){const e=this.getBestFrame().toDataURL("image/jpeg"),t=this.getBlobFromDataURL(e);this.sendBestFramePost(t);const i={bestFrame:e};this.successCallback(i),this.stop()}else if(this.data.livenessFailed){const e={};this.failCallback(e),this.stop()}else if(this.data.livenessError){const e={};this.errorCallback(e),this.stop()}else this.canSendNewFrame=!0;else{console.error(`Server Error! Status: ${e}; Response: ${i}`);const t={errorType:"serverError",status:e,response:i};this.errorCallback(t)}}callUpdateCallback(){let e=this.data.render;e.ovalLeft=this.data.ovalLeft,e.ovalRight=this.data.ovalRight,e.ovalTop=this.data.ovalTop,e.ovalBottom=this.data.ovalBottom,this.updateCallback(e)}getBlobFromCanvas(e){const t=e.toDataURL("image/jpeg");return this.getBlobFromDataURL(t)}getBlobFromDataURL(e){const t=atob(e.split(",")[1]),i=[];for(let e=0;e<t.length;e++)i.push(t.charCodeAt(e));return new Blob([new Uint8Array(i)],{type:"image/jpeg"})}startRecording(){this.recordingHasStopped=!1,verilive.recordedBlobs=[],this.recordingOptions={mimeType:"video/webm",audioBitsPerSecond:0,videoBitsPerSecond:25e5};try{this.mediaRecorder=new MediaRecorder(this.stream,this.recordingOptions),this.mediaRecorder.ondataavailable=this.handleDataAvailable,this.mediaRecorder.start()}catch(e){console.error(`${this.name}: error starting mediaRecorder: ${e}`)}}stopRecording(){this.recordingHasStopped=!0;try{this.mediaRecorder.stop()}catch(e){console.error(`${this.name}: error stopping mediaRecorder: ${e}`)}}handleDataAvailable(e){e.data&&e.data.size>0&&verilive.recordedBlobs.push(e.data),window.verilive.recordingHasStopped&&window.verilive.sendVideo()}sendVideo(){verilive.overlay.setLoadingVisibility(!0);const e=new Blob(verilive.recordedBlobs,{type:"video/webm"}),t=new FormData;t.append("upload_video",e,"upload_video.webm"),t.append("jsToken",verilive.jsToken);const i=new XMLHttpRequest;i.open("POST",verilive.url+"_video",!0),i.onload=function(){console.log(`${verilive.name}: Video sending has finished`),window.verilive.overlay.setLoadingVisibility(!1)}.bind(i),i.setRequestHeader("jsToken",verilive.jsToken),""!==verilive.apiKey&&i.setRequestHeader("apikey",verilive.apiKey),i.send(t)}}!function(e){e.verilive=new f}(window)})()})();